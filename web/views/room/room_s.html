<% include ../header.html %>
<div class="container" id="result">
</div>
<div class="container">
	<div class="row">
		
	</div>
</div>
<script type="text/javascript" src="/js/common/config.js"></script>
<script type="text/javascript" src="/js/common/keepAlive.js"></script>
<script type="text/javascript">
	connect.init(config.wsServerIP, config.wsServerPort, config.wsServerProtocol, function () {
		connect.register('room.enter', function (data) {
			if (data.status == 'success') {
				$.get('http://127.0.0.1:6003/api/room/get?id=<%-room.roomID %>', function (data) {
					data = JSON.parse(data);
					if (data.code == 200) {
						$('#result').html("进入页面成功！开始渲染页面.......<br>username: <%-user.username %>, role: <%-user.role %>");
						//渲染页面
					}
				})
			} else {
				$('#result').html("进入页面失败！");
				//提示错误!
			}
		})
		connect.send({	c: 'room.enter', 
						data: { roomID: '<%-room.roomID %>', username: '<%-user.username %>', role: '<%-user.role %>' }});
	});	
</script>
<% include ../footer.html %>